<div class="container-fluid mt-5 mb-5">
  <div class="card border border-success border-2 shadow p-3">
    <div class="card-body table-responsive">

      <div class="row mb-5 mt-2">
        <div class="col">
        </div>
        <div class="col">
          <h3 class="card-title font-weight-bold text-success text-uppercase text-center">Liste de tous les candidats
          </h3>
        </div>
        <div class="col">
          <form class="d-flex">
            <input class="form-control me-2" type="search" name='search_name' [(ngModel)]="search_name"
              placeholder="Entrer le nom du candidat" aria-label="Search">
            <button class="btn btn-outline-warning btn-sm" type="submit" (click)="getSearch()">Rechercher</button>
          </form>
        </div>
      </div>

      <div class="row row-cols-4 row-cols-md-4 d-flex mt-4">
        <div class="col mb-4" *ngFor="let candidats of candidats; let i = index"
        [class.active]="i == currentIndex ">
          <div class="card shadow border-warning border-2 text-light" role="button" 
               (click)="openModal1(template1, candidats, i)" > 
              <img src="../../../assets/Slides vote/drapeau-du-senegal2.jpg" class="card-img-top" alt="...">
              <div class="card-img-overlay">
                <div class="card-body text-center">
                   <div style="font-size: 1.4rem;"> 
                    <p class="card-title "><strong>{{candidats.prenom_candidat}}</strong></p>
                    <p class="card-title "><strong>{{candidats.nom_candidat}}</strong></p>
                   </div>
                </div>
              </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title text-center">Nouveau Candidat</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
       
    <div class="container d-flex justify-content-center mt-3 mb-3">
    <div class="card border border-primary border-3 rounded-3  shadow p-3" style="width:29rem;">
      <div class="card-body text-center">
        <form #candidat="ngForm" (ngSubmit)="saveCandidat(candidat.value)">
          <img class="mb-4 rounded-circle mx-auto d-block" src="../../../assets/Slides vote/drapeau-du-senegal2.jpg"
            alt="" width="100" height="80">
          <h1 class="h3 mb-3 fw-normal text-primary">Veuillez ajouter un nouveau candidat !!!</h1>
          <span>
            <hr class="text-divider">
          </span>
          <div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="floatingInput" name="nom_candidat" ngModel placeholder="nom_candidat">
              <label for="floatingInput"><i class="fa fa-user fa-fw fa-1x"></i>&nbsp; Nom</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="floatingInput" name="prenom_candidat" ngModel placeholder="prenom_candidat">
              <label for="floatingInput"><i class="fa fa-user fa-fw fa-1x"></i>&nbsp; Prénom</label>
            </div>
            <div class="form-floating mb-3">
              <input type="number" class="form-control" id="floatingPassword" name="num_cni_candidat" ngModel
                placeholder="num_cni_candidat">
              <label for="floatingPassword"><i class="fa fa-users fa-fw fa-1x" aria-hidden="true"></i>&nbsp;
                Numéro CNI</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="floatingInput" name="parti_politique" ngModel placeholder="parti_politique">
              <label for="floatingInput"><i class="fa fa-edit fa-fw fa-1x"></i>&nbsp; Parti Politique</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="floatingInput" name="programme" ngModel
                placeholder="programme">
              <label for="floatingInput"><i class="fa fa-edit fa-fw fa-1x"></i>&nbsp; Programme</label>
            </div>
            <div class="form-floating mb-3">
              <select class="form-select form-select-sm" aria-label=".form-select-sm example" id="floatingInput"
                name="commune_id" ngModel placeholder="commune_id" >
                <option *ngFor="let commune of commune" 
                        [value]="commune.id">
                        {{commune.nom_commune}}
                </option>
              </select>
              <label for="floatingInput"><i class="fa fa-edit fa-fw fa-1x"></i>&nbsp; Commune</label>
            </div>
          </div>
          <button class="w-100 btn btn-lg btn-primary " type="submit">Sauvegarder</button>
        </form>
      </div>
    </div>
  </div>
  </div>
</ng-template>

<ng-template #template1>
  <!--  -->
  <div class="modal-body">
    <div class="container d-flex justify-content-center mt-3 mb-3">
      <div class="card border border-dark border-3 rounded-3  shadow p-3" style="width:55rem;">
        <div class="card-body"> 
          <div class=" text-center h1">
             <strong>{{currentCandidat.prenom_candidat}} {{currentCandidat.nom_candidat}}</strong>
          </div>
          <div style="font-size: 1.4rem;">
            <p><strong>Parti politique</strong>: {{currentCandidat.parti_politique}}</p>
            <p><strong>Programme</strong>: {{currentCandidat.programme}}</p>
            <p><strong>Commune</strong>: {{currentCandidat.nom_commune}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>