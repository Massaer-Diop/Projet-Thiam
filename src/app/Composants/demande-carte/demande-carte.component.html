<div class="container-fluid mt-5 mb-5">
  <div class="card border border-success border-2 shadow p-3">
    <div class="card-body table-responsive">
      <div class="row mb-5 mt-2">
        <div class="col">
          <img src="../../../assets/Slides vote/drapeau-du-senegal2.jpg" style="width: 45px; height: 35px;" alt="">
        </div>
        <div class="col">
          <h3 class="card-title font-weight-bold text-success text-uppercase text-center">Liste des demandes de carte
            électeur</h3>
        </div>
        <div class="col">

        </div>
      </div>

      <div>
        <table class="table table-hover table-sm text-center">
          <thead>
            <tr>
              <th scope="col">NUMERO CNI</th>
              <th scope="col">PRENOM</th>
              <th scope="col">NOM</th>
              <th scope="col">ADRESSE</th>
              <th scope="col">DATE DE NAISSANCE</th>
              <th scope="col">OPTION</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let demandeCarte of demandeCarte; let i = index" 
                        [class.active]="i == currentIndex">
              <td style="font-weight: 750;">{{demandeCarte.num_cni}}</td>
              <td>{{demandeCarte.prenom}}</td>
              <td>{{demandeCarte.nom}}</td>
              <td>{{demandeCarte.adresse}}</td>
              <td>{{demandeCarte.annee_naissance}}</td>
              <td>
                <button class="btn btn-primary me-1" (click)="openModal(template, demandeCarte, i)"><i
                    class="fa fa-edit" aria-hidden="true"></i></button>
              </td>

              
              <ng-template #template>
                <div class="modal-header">
                  <h4 class="modal-title text-center">Créer un électeur</h4>
                  <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
                    <span aria-hidden="true" class="visually-hidden">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                     
                  <div class="container d-flex justify-content-center mt-5 mb-5">
                    <div class="card border border-danger bg-primary border-3 rounded-3  shadow p-3" style="width:40rem;">
                      <div class="card-body text-center">
                        <form>
                          <img class="mb-4 rounded-circle mx-auto d-block" src="../../../assets/Slides vote/drapeau-du-senegal2.jpg"
                            alt="" width="100" height="80">
                          <h1 class="h3 mb-3 fw-normal text-light">Veuillez ajouter un nouveau électeur !!!</h1>
                          <span>
                            <hr class="text-divider">
                          </span>
                          <div>
                            <div class="form-floating mb-3">
                              <input type="text" 
                                     class="form-control" 
                                     id="floatingInput" 
                                     name="nom" 
                                     [(ngModel)]="currentDemandeCarte.nom" 
                                     placeholder="nom_electeur">
                              <label for="floatingInput"><i class="fa fa-user fa-fw fa-1x"></i>&nbsp; Nom</label>
                            </div>
                            <div class="form-floating mb-3">
                              <input type="text" 
                                     class="form-control" 
                                     id="floatingInput" 
                                     name="prenom" 
                                     [(ngModel)]="currentDemandeCarte.prenom"
                                     placeholder="prenom_electeur">
                              <label for="floatingInput"><i class="fa fa-user fa-fw fa-1x"></i>&nbsp; Prénom</label>
                            </div>
                            <div class="form-floating mb-3">
                              <input type="number" 
                                     class="form-control" 
                                     id="floatingPassword" 
                                     name="num_cni" 
                                     [(ngModel)]="currentDemandeCarte.num_cni"
                                placeholder="num_cni">
                              <label for="floatingPassword"><i class="fa fa-users fa-fw fa-1x" aria-hidden="true"></i>&nbsp;
                                Numéro CNI</label>
                            </div>
                            <div class="form-floating mb-3">
                              <input type="text" 
                                     class="form-control" 
                                     id="floatingInput" 
                                     name="adresse" 
                                     [(ngModel)]="currentDemandeCarte.adresse"
                                     placeholder="adresse">
                              <label for="floatingInput"><i class="fa fa-edit fa-fw fa-1x"></i>&nbsp; Adresse</label>
                            </div>
                            <div class="form-floating mb-3">
                              <input type="number" 
                                     class="form-control" 
                                     id="floatingInput" 
                                     name="numero" 
                                     [(ngModel)]="currentDemandeCarte.numero"
                                     placeholder="numero">
                              <label for="floatingInput"><i class="fa fa-edit fa-fw fa-1x"></i>&nbsp; Numéro Electeur</label>
                            </div>
                            <div class="form-floating mb-3">
                              <input type="text" 
                                     class="form-control" 
                                     id="floatingInput" 
                                     name="annee_naissance" 
                                     [(ngModel)]="currentDemandeCarte.annee_naissance"
                                     placeholder="annee_naissance">
                              <label for="floatingInput"><i class="fa fa-edit fa-fw fa-1x"></i>&nbsp; Année de naissance</label>
                            </div>
                            <div class="form-floating mb-3">
                              <select class="form-select form-select-sm" 
                                      aria-label=".form-select-sm example" 
                                      id="floatingInput"
                                      name="commune_id" 
                                      [(ngModel)]="currentDemandeCarte.commune_id" 
                                      placeholder="commune_id" >
                                <option *ngFor="let commune of commune" 
                                        [value]="commune.id">
                                        {{commune.nom_commune}}
                                </option>
                              </select>
                              <label for="floatingInput"><i class="fa fa-edit fa-fw fa-1x"></i>&nbsp; Commune</label>
                            </div>
                          </div>
                          <button class="w-100 btn btn-lg btn-outline-light" (click)='onCreateElecteur()'>Sauvegarder</button>
                        </form>
                      </div>
                    </div>
                  </div>
                  <br><br>
                
                 
                </div>
              </ng-template>
              

            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>